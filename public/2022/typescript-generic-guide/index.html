<!DOCTYPE html>
<html>
    <head>
<title> TypeScript 范型指北 &middot; Tilemoon Blog </title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="keywords" content="github,">
<meta name="description" content="tilemoon blog">


<link rel="stylesheet" href="https://tilemoon.life/css/index.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
<link rel='shortcut icon' type='image/x-icon' href='/images/favicon.ico' />
</head>
    <body class="theme-light"><header>
  <div class="header-leading space-12">
    <a class="action-btn" href="//github.com/tilemoon" target="_blank">
      <i class="fa fa-github fa-lg" aria-hidden="true"></i>
    </a>
  </div>
  <div class="header-menus space-24">
    
      <a class="header-menu-item" href="/">Home</a>
    
      <a class="header-menu-item" href="/archive">Archive</a>
    
      <a class="header-menu-item" href="/profile">Profile</a>
    
  </div>
  <div class="header-actions space-12">
    <button id="theme-toggle" class="action-btn" onclick="toggleTheme()">
      <i class="fa fa-sun-o fa-lg" aria-hidden="true"></i>
    </button>
  </div>
</header>
<main id="main">
<div class="content">
  <div class="table-of-content">
    <nav id="TableOfContents"></nav>
  </div>

  <section class="single-post markdown-body">
    <h1 class="single-post-title"><a href="https://tilemoon.life/2022/typescript-generic-guide/">TypeScript 范型指北</a></h1>
    <span class="single-post-date">2022-06-15 66:66</span>
    <div class="single-post-content">
      <p>先看下面这个场景，<code>Order</code> 和 <code>Article</code> 中都有属性 <code>id</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">searchOrder</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">list</span>: <span style="color:#66d9ef">Order</span>[], <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Order</span> <span style="color:#f92672">=&gt;</span> {...}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">searchArtice</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">list</span>: <span style="color:#66d9ef">Artice</span>[], <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Article</span> <span style="color:#f92672">=&gt;</span> {...}
</span></span></code></pre></div><p>这里有两个函数 <code>searchOrder</code> 和 <code>searchArtice</code>，它们的作用很简单，都是从一个数组中筛选出来某一个元素，但是相同的功能
需却需要写两遍，首先可能会想到下面这种解法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">search</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">list</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">Order</span>[] <span style="color:#f92672">|</span> <span style="color:#a6e22e">Article</span>[]), <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Order</span> <span style="color:#f92672">|</span> <span style="color:#a6e22e">Article</span> <span style="color:#f92672">=&gt;</span> {...}
</span></span></code></pre></div><p>虽然在很多场景下可以正常工作，但是这么做 <code>search</code> 方法输出的结果就丢失了想要的类型，有时候就很容易直接写 <code>any</code> 或者是 <code>as Order</code>，这个时候使用范型就可以完美的解决问题</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">search</span> <span style="color:#f92672">=</span> &lt;<span style="color:#f92672">T</span> <span style="color:#a6e22e">extends</span> { <span style="color:#a6e22e">id</span><span style="color:#960050;background-color:#1e0010">:</span> <span style="color:#a6e22e">string</span> }&gt;(<span style="color:#a6e22e">list</span>: <span style="color:#66d9ef">T</span>[], <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">string</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">T</span> <span style="color:#f92672">=&gt;</span> {...}
</span></span></code></pre></div><p>这样 <code>search</code> 函数就可以完美的识别入参并返回正确的类型</p>
    </div>
  </section>
</div>

        </main><div  class="footer">
</div>
<script type="text/javascript" src="https://tilemoon.life/js/index.js"></script>
    </body>
</html>
